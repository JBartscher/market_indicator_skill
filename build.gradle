apply plugin: 'java'

// project level config
sourceSets.main.java.srcDir 'src'
sourceCompatibility = 1.7
targetCompatibility = 1.7

// grab lazylib and graphicslib before compiling
task fetchDeps(type: Exec) {
	commandLine 'sh', 'util/fetch-deps.sh'
}
compileJava.dependsOn fetchDeps

// copy mod jar to current directory
task copyJar(type: Copy) {
	from 'build/libs/'
	include '*.jar'
	into '.'
}
build.dependsOn copyJar

task createRelease(type: Exec) {
	commandLine 'sh', 'util/create-release.sh'
}

clean {
	delete fileTree('.') { include '*.jar' }	
}

// create new gradle wrapper
task wrapper(type: Wrapper) {
    gradleVersion = '3.2.1' 
}

// compile time dependencies for most mods 
dependencies {
	compile files('../GraphicsLib/jars/Graphics.jar')
	compile files('../LazyLib/jars/LazyLib.jar')
	// everything in starsector main folder
	compile fileTree(dir: '../../', include: ['*.jar'])
}

